Things to do:
  - simplify Query struct
  - refactor main resolving method
  - parallelize resolving process
